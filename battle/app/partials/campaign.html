<h3>Campaign: {{campaign.name}}</h3>
<p class="lead">{{campaign.text}}</p>

<h3>Characters:</h3>

<div ng-repeat="character in character_list">
    <div class="character-block">
        <div class="row-fluid">
            <div class="span2">
                <a href="#/character/{{character.id}}/"><p class="lead">{{character.name}}</p></a>
            </div>
            <div class="span10">
                <table class="stats table table-bordered table-condensed">
                    <tr>
                        <th class="stats" rowspan="2">STATS</th>

                        <th class="hp">HP</th>
                        <th class="hs">HS</th>
                        <th class="xp">XP</th>
                        <th class="gold">Gold</th>
                        <th class="used" rowspan="2">USED</th>
                        <th class="hp">HP</th>
                        <th class="hs">HS</th>
                        <th class="ap">AP</th>
                        <th class="total" rowspan="2">TOTAL</th>
                        <th class="hp">HP</th>
                        <th class="hs">HS</th>
                        <th class="ap">AP</th>
                    </tr>
                    <tr>
                        <td>{{character.hit_points}}</td>
                        <td>{{character.healing_surges}}</td>
                        <td>{{character.experience_points}}</td>
                        <td>{{character.gold}}</td>
                        <td>{{character.used_hit_points}}</td>
                        <td>{{character.used_healing_surges}}</td>
                        <td>{{character.used_action_points}}</td>
                        <td>{{character|total_hp}}</td>
                        <td>{{character|total_hs}}</td>
                        <td>{{character|total_ap}}</td>
                    </tr>
                </table>
            </div>
        </div>
        <div class="row-fluid">
            <div class="span3">
                <div class="btn-group">
                    <button ng-click="shortRest(character)" class="btn btn-inverse">ShortRest</button>
                    <button ng-click="extRest(character)" class="btn btn-inverse">ExtRest</button>
                </div>
            </div>
            <div class="span4">
                <div class="btn-group">
                    <button ng-click="spendAp(character)" class="btn btn-primary">AP</button>
                    <button ng-click="awardMilestone(character)" class="btn btn-primary">Milestone</button>
                    <button ng-click="spendHs(character)" class="btn btn-info">HS</button>
                </div>
            </div>
            <div class="span3">
                <div class="input-prepend">
                    <button ng-click="changeHp(character)" class="btn btn-danger">Damage/Heal</button>
                    <input class="span2" ng-model="change_hp[character.id]" type="text">
                </div>
            </div>
            <div class="span2">
                <div class="input-prepend">
                    <button ng-click="setInit(character)" class="btn">SetInit</button>
                    <input class="span2" ng-model="set_init[character.id]" type="text">
                </div>
            </div>
        </div> 
        <div class="row-fluid">
            <div class="span3">
                <div class="input-prepend">
                    <button ng-click="changeXp(character)" class="btn btn-success">AwardXP</button>
                    <input class="span3" ng-model="change_xp[character.id]" type="text">
                </div>
            </div>
            <div class="span3">
                <div class="input-prepend">
                    <button ng-click="changeGold(character)" class="btn btn-warning">GiveGold</button>
                    <input class="span3" ng-model="change_gold[character.id]" type="text">
                </div>
            </div>
            <div class="span6">
                <div class="btn-group">
                    <button ng-click="change_hp[character.id] = change_hp[character.id]-20" class="btn btn-info">20</button>
                    <button ng-click="change_hp[character.id] = change_hp[character.id]-10" class="btn btn-info">10</button>
                    <button ng-click="change_hp[character.id] = change_hp[character.id]-5" class="btn btn-info">5</button>
                    <button ng-click="change_hp[character.id] = change_hp[character.id]-1" class="btn btn-info">1</button>
                    <button ng-click="change_hp[character.id] = change_hp[character.id]+1"
                     class="btn btn-danger">1</button>
                    <button ng-click="change_hp[character.id] = change_hp[character.id]+5" class="btn btn-danger">5</button>
                    <button ng-click="change_hp[character.id] = change_hp[character.id]+10" class="btn btn-danger">10</button>
                    <button ng-click="change_hp[character.id] = change_hp[character.id]+20" class="btn btn-danger">20</button>
                </div>
            </div>
        </div>
        <div class="row-fluid">
            <div class="span6">
                <table class="table">
                    <tr>
                        <th rowspan="3">Encounters</th>
                        <th>#</th><th>Power Name</th><th>Used?</th>
                    </tr>
                    <tr ng-repeat="haspower in character.haspowers">
                        <td>1</td>
                        <td>{{haspower.power}}</td>
                        <td></td>
                    </tr>
                </table>
            </div>
            <div class="span6"></div>
        </div>
    </div> 
</div>
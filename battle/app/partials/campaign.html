<h3>Campaign: {{campaign.name}}</h3>
<p class="lead">{{campaign.text}}</p>

<h3>Characters:</h3>
<div ng-controller="MenuController" class="docked-menu well hidden-phone">
    <div class="row-fluid">
        <div class="span12">
            <h4>Conditions</h4>
            <div class="row-fluid conditions-box" data-drop="true" ng-model="conditionList">
                <div ng-repeat="(ci, condition) in conditionList" class="condition-box" tooltip-popup-delay='400' tooltip="{{condition.name}}" ng-show="condition.name" data-drag="true" data-jqyoui-options="{revert: 'invalid', helper: 'clone'}" ng-model="conditionList" jqyoui-draggable="{index: {{$index}}}" ng-click="fetch_from_compendium(condition.wizards_id, 'glossary')">
                    <i class="{{condition|condition_icon}} icon-white"></i>
                </div>
            </div>
            <h4>Dices</h4>
            <div class="row-fluid">
                <div ng-click="roll(2)" class="button-cell">d2</div>
                <div ng-click="roll(3)" class="button-cell">d3</div>
                <div ng-click="roll(4)" class="button-cell">d4</div>
                <div ng-click="roll(6)" class="button-cell">d6</div>
                <div ng-click="roll(8)" class="button-cell">d8</div>
                <div ng-click="roll(10)" class="button-cell">d10</div>
                <div ng-click="roll(12)" class="button-cell">d12</div>
                <div ng-click="roll(20)" class="button-cell">d20</div>
                <div ng-click="roll(100)" class="button-cell">d100</div>
            </div>
            <div class="row-fluid">
                <div class="span1">
                    <label class="checkbox"><input type="radio" ng-model="diceMult" value="1">1</label>
                </div>
                <div class="span1">
                    <label class="checkbox"><input type="radio" ng-model="diceMult" value="2">2</label>
                </div>
                <div class="span1">
                    <label class="checkbox"><input type="radio" ng-model="diceMult" value="3">3</label>
                </div>
                <div class="span1">
                    <label class="checkbox"><input type="radio" ng-model="diceMult" value="4">4</label>
                </div>
                <div class="span1">
                    <label class="checkbox"><input type="radio" ng-model="diceMult" value="5">5</label>
                </div>
                <div class="span1">
                    <label class="checkbox"><input type="radio" ng-model="diceMult" value="6">6</label>
                </div>
                <div class="span1">
                    <label class="checkbox"><input type="radio" ng-model="diceMult" value="7">7</label>
                </div>
                <div class="span1">
                    <label class="checkbox"><input type="radio" ng-model="diceMult" value="8">8</label>
                </div>
                <div class="span1">
                    <label class="checkbox"><input type="radio" ng-model="diceMult" value="9">9</label>
                </div>
                <div class="span1">
                    <label class="checkbox"><input type="radio" ng-model="diceMult" value="10">10</label>
                </div>
                <div class="span1">
                    <label class="checkbox"><input type="radio" ng-model="diceMult" value="11">11</label>
                </div>
                <div class="span1">
                    <label class="checkbox"><input type="radio" ng-model="diceMult" value="12">12</label>
                </div>
            </div>
            <h4>Turn Manager</h4>
            <h4>Campaign Manager</h4>
            <div class="row-fluid">
                <div class="btn" ng-click="add_enemy()">+Enemy</div>
            </div>
        </div>
    </div>
    <div class="row-fluid">
        <div class="span4">
            
        </div>
    </div>
</div>
<div id="console">
    <div ng-repeat="line in log">{{line}}</div>
</div>
<div class="row-fluid">
    <div class="span6">
        <div ng-controller="CharacterController" ng-repeat="(chi, ch) in characterList" class="row-fluid character-block">
            <div class="row-fluid">
                <div class="span2">
                    <div class="row-fluid name-container">
                        {{ch.name}}
                    </div>
                </div>
                <div class="span9">
                    <div class="row-fluid has-conditions-box" data-drop="true" ng-model='droppedConditions' jqyoui-droppable="{multiple:true,onDrop:'condition_drop'}">
                        <div ng-repeat="(hci, hco) in ch._has_conditions" class="condition-box" ng-click="remove_condition(hci)" tooltip-popup-delay='400' tooltip="{{hco._condition.name}}">
                            <i class="{{hco._condition|condition_icon}} icon-white"></i>
                        </div>
                    </div>
                </div>
                <div class="span1">
                    <div class="dropdown">
                        <a class="dropdown-toggle"><div class="button-cell"><i class="icon-cog"></i></div></a>
                        <ul class="dropdown-menu">
                            <li ng-show="ch.type == 'Player'">
                              <a ng-click="short_rest(ch)">Short Rest</a>
                            </li>
                            <li ng-show="ch.type == 'Player'">
                              <a ng-click="extended_rest(ch)">Extended Rest</a>
                            </li>
                            <li ng-show="ch.type == 'Player'">
                              <a ng-click="milestone(ch)">Milestone</a>
                            </li>
                            <li ng-show="ch.type == 'Enemy'">
                              <a ng-click="delete_character(chi, ch)">Remove</a>
                            </li>
                            <li>
                              <a ng-click="clear_conditions(ch)">Clear Conditions</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="row-fluid">
                <div class="span6">
                    <div class="row-fluid">
                        <div class="span4">
                            <div class="row-fluid">
                                <div class="span10">
                                    <div ng-click="hp_dialog()" class="stat-number hp">
                                        <p>{{ch|total_hp}}</p>
                                    </div>
                                </div>
                                <div class="span2">
                                    &nbsp;<i ng-show="Och.bloodied(ch)" class="icon-tint"></i>
                                </div>
                            </div>
                        </div>
                        <div class="span3">
                            <div ng-click="init_dialog()" class="stat-number init">
                                <p>{{ch.init}}</p>
                            </div>
                        </div>
                        
                        <div class="span3">
                            <div ng-click="spend_hs(ch)" class="stat-number hs">
                                <p>{{ch|total_hs}}</p>
                            </div>
                        </div>
                        <div class="span2">
                            <div ng-click="spend_ap(ch)" class="stat-number ap">
                                <p>{{ch|total_ap}}</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="span6">
                    <div class="power-container">
                        <div ng-controller="HasPowerController" ng-repeat="hasPower in ch._has_powers" ng-click="use_power()" class="power-use-button {{hasPower._power|power_type}} {{hasPower|power_style}}" tooltip-popup-delay='400' tooltip="{{hasPower.power}} - {{hasPower._power.action}}">
                            {{hasPower._power.level}}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Modal -->
<div ng-controller='ModalController' class="wizards-modal" modal="wizardsModal" close="close()">
        <button type="button" class="close" ng-click="close()">Ã—</button>
    <div ng-bind-html="detailTag" id="detail">
    </div>
</div>
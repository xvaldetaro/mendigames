<h3>Campaign: {{campaignList[campaignId].name}}</h3>
<p class="lead">{{campaignList[campaignId].text}}</p>

<h3>Characters:</h3>
<div ng-controller="MenuController" class="docked-menu well hidden-phone">
    <div class="row-fluid">
        <div class="span12">
            <h4>Conditions</h4>
            <div class="row-fluid conditions-box" data-drop="true" ng-model="conditionList">
                <div ng-repeat="(ci, condition) in conditionList" class="condition-box" tooltip-popup-delay='400' tooltip="{{condition.name}}" ng-show="condition.name" data-drag="true" data-jqyoui-options="{revert: 'invalid', helper: 'clone'}" ng-model="conditionList" jqyoui-draggable="{index: {{$index}}}" ng-click="fetch_from_compendium(condition, 'glossary')">
                    <i class="{{condition|condition_icon}} icon-white"></i>
                </div>
            </div>
            <h4>Dices</h4>
            <div class="row-fluid">
                <div ng-click="roll(2)" class="button-cell">d2</div>
                <div ng-click="roll(3)" class="button-cell">d3</div>
                <div ng-click="roll(4)" class="button-cell">d4</div>
                <div ng-click="roll(6)" class="button-cell">d6</div>
                <div ng-click="roll(8)" class="button-cell">d8</div>
                <div ng-click="roll(10)" class="button-cell">d10</div>
                <div ng-click="roll(12)" class="button-cell">d12</div>
                <div ng-click="roll(20)" class="button-cell">d20</div>
                <div ng-click="roll(100)" class="button-cell">d100</div>
            </div>
            <div class="row-fluid">
                <div class="span1">
                    <label class="checkbox"><input type="radio" ng-model="diceMult" value="1">1</label>
                </div>
                <div class="span1">
                    <label class="checkbox"><input type="radio" ng-model="diceMult" value="2">2</label>
                </div>
                <div class="span1">
                    <label class="checkbox"><input type="radio" ng-model="diceMult" value="3">3</label>
                </div>
                <div class="span1">
                    <label class="checkbox"><input type="radio" ng-model="diceMult" value="4">4</label>
                </div>
                <div class="span1">
                    <label class="checkbox"><input type="radio" ng-model="diceMult" value="5">5</label>
                </div>
                <div class="span1">
                    <label class="checkbox"><input type="radio" ng-model="diceMult" value="6">6</label>
                </div>
                <div class="span1">
                    <label class="checkbox"><input type="radio" ng-model="diceMult" value="7">7</label>
                </div>
                <div class="span1">
                    <label class="checkbox"><input type="radio" ng-model="diceMult" value="8">8</label>
                </div>
                <div class="span1">
                    <label class="checkbox"><input type="radio" ng-model="diceMult" value="9">9</label>
                </div>
                <div class="span1">
                    <label class="checkbox"><input type="radio" ng-model="diceMult" value="10">10</label>
                </div>
                <div class="span1">
                    <label class="checkbox"><input type="radio" ng-model="diceMult" value="11">11</label>
                </div>
                <div class="span1">
                    <label class="checkbox"><input type="radio" ng-model="diceMult" value="12">12</label>
                </div>
            </div>
            <h4>Turn Manager</h4>
            <div class="row-fluid">
                Turn: {{characterList[campaign.turn].name}} | Round: {{campaign.round}}
            </div>
            <div class="row-fluid">
                <div class="btn" ng-click="next()">Next &raquo;</div>
                <div class="btn" ng-click="reorder()">Reorder</div>
            </div>
            <div class="row-fluid">
                <div class="btn" ng-click="set_round(roundInput)">Set Round</div>
                <input type="text" class="input-mini" ng-model="roundInput" ng-init="roundInput=0">
            </div>
            <h4>Campaign Manager</h4>
            <div class="row-fluid">
                <div class="btn" ng-click="add_enemy()">+Enemy</div>
                <div class="btn" ng-click="clear_enemies()">-Enemies</div>
            </div>
            <h4>Mass Control</h4>
            <div class="row-fluid">
                <div class="btn" ng-click="mass_clear_conditions()">Clear Conditions</div>
                <div class="btn" ng-click="mass_short_rest()">Short Rest</div>
                <div class="btn" ng-click="mass_extended_rest()">Extended Rest</div>
                <div class="btn" ng-click="mass_milestone()">Milestone</div>
                <div class="btn" ng-click="split_gold()">Split Gold</div>
                <div class="btn" ng-click="mass_give_gold()">Give Gold</div>
                <div class="btn" ng-click="split_xp()">Split XP</div>
                <div class="btn" ng-click="mass_give_xp()">Give XP</div>
            </div>
        </div>
    </div>
</div>
<div id="console">
    <div ng-repeat="line in log">{{line}}</div>
</div>
<div class="row">
    <div class="span7">
        <div ng-controller="CharacterController" ng-repeat="(chi, ch) in characterList" class="row-fluid character-block {{ch.type}} {{has_turn()}}">
            <div class="span11">
                <div class="row-fluid">
                    <div class="span3">
                        <div class="dropdown">
                            <a class="dropdown-toggle">
                                <div class="name-container">
                                    <i class="icon-cog"></i>
                                    {{ch.name}}
                                </div></a>
                            <ul class="dropdown-menu">
                                <li ng-show="ch.type == 'Player'">
                                  <a ng-click="short_rest(ch)">Short Rest</a>
                                </li>
                                <li ng-show="ch.type == 'Player'">
                                  <a ng-click="extended_rest(ch)">Extended Rest</a>
                                </li>
                                <li ng-show="ch.type == 'Player'">
                                  <a ng-click="milestone(ch)">Milestone</a>
                                </li>
                                <li ng-show="ch.type == 'Enemy'">
                                  <a ng-click="delete_character(chi, ch)">Remove</a>
                                </li>
                                <li>
                                  <a ng-click="clear_conditions(ch)">Clear Conditions</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div class="span6">
                        <div ng-click="hp_dialog()" class="stat-number hp {{ch.type}}">
                            <i ng-show="!Och.bloodied(ch)" class="icon-heart icon-white"></i>
                            <i ng-show="Och.bloodied(ch)" class="icon-tint icon-white"></i>
                            <p ng-show="ch.type != 'Enemy'">{{ch|total_hp}}</p>
                            <p ng-show="ch.type == 'Enemy' && !Och.incapacitated(ch)">{{ch.used_hit_points}}</p>
                            <p ng-show="ch.type == 'Enemy' && Och.incapacitated(ch)">XX</p>
                            
                        </div>
                        <div ng-click="spend_hs(ch)" ng-show="ch.type == 'Player'" class="stat-number hs">
                            <i class="icon-plus icon-white"></i><p>{{ch|total_hs}}</p>
                        </div>
                        <div ng-click="spend_ap(ch)" class="stat-number ap">
                            <i class="icon-star icon-white"></i><p>{{ch|total_ap}}</p>
                        </div>
                        <div ng-show="ch.type == 'Player'" ng-click="change_gold(ch)" class="stat-number gold">
                            <i class="icon-shopping-cart icon-white"></i><p>{{ch.gold}}</p>
                        </div>
                        <div ng-show="ch.type == 'Player'" ng-click="change_xp(ch)" class="stat-number xp">
                            <i class="icon-road icon-white"></i><p>{{ch.experience_points}}</p>
                        </div>
                    </div>
                    <div class="span3">
                        <div class="row-fluid has-conditions-box" data-drop="true" ng-model='droppedConditions' jqyoui-droppable="{multiple:true,onDrop:'condition_drop'}">
                            <div ng-repeat="(hci, hco) in ch._has_conditions" class="condition-box" ng-click="remove_condition(hci)" tooltip-popup-delay='400' tooltip="{{hco._condition.name}} I:{{hco.started_init}} R:{{hco.started_round}} ">
                                <i class="{{hco._condition|condition_icon}} icon-white"></i>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="power-container">
                    <div ng-controller="HasPowerController" ng-repeat="hasPower in ch._has_powers" ng-click="use_power()" class="power-use-button {{hasPower._power|power_type}} {{hasPower|power_style}}" tooltip-popup-delay='400' tooltip="{{hasPower._power.name}} - {{hasPower._power.action}}">
                        {{hasPower._power.level}}
                    </div>
                </div>
            </div>
            <div class="span1">
                <div ng-click="init_dialog()" class="stat-number init">
                    <i class="icon-play"></i><p>{{ch.init}}</p>
                </div>
                <div ng-click="increase_sub_init(ch)" class="stat-number ap">
                    <i class="icon-play icon-white"></i><p>{{ch.sub_init}}</p>
                </div>
            </div>
        </div>
    </div>

</div>
<!-- Modal -->
<div ng-controller='ModalController' class="wizards-modal" modal="wizardsModal" close="close()">
        <button type="button" class="close" ng-click="close()">×</button>
    <div ng-bind-html="detailTag" id="detail">
    </div>
</div>
<div ng-include src="'/static/mendigames/partials/navbar.html'"></div>
<div ng-controller="MenuController" class="docked-menu hidden-phone">
    <div class="menu-group">
        <label>Conditions</label>
        <div class="row-fluid conditions-box" btf-dragon="(ci, condition) in conditionList" btf-double-dragon btf-dragon-accepts="ret_false">
            <div class="condition-box" tooltip-popup-delay='400' tooltip="{{condition.name}}" ng-click="compendium(condition)">
                <i class="{{condition|condition_icon}} icon-white"></i>
            </div>
        </div>
        <!-- Modal -->
        <div class="wizards-modal" modal="wizardsModal" close="wizardsModal = false;">
            <div ng-bind-html="modalCondition.html_description" id="detail">
            </div>
        </div>
    </div>
    <div class="menu-group">
        <label>Dices</label>
        <div class="row-fluid">
            <div class="span3">
                <div class="control-group borderdices">
                    <div class="borderdices totalcenteralign text-center">
                    <label class="control-label" for="inputEmail">Multiplier:</label>
                    </div>
                    <div class="controls text-center controlsmargin">
                        <select class="input-mini" ng-model="diceMult">
                            <option>1</option>
                            <option>2</option>
                            <option>3</option>
                            <option>4</option>
                            <option>5</option>
                            <option>6</option>
                            <option>7</option>
                            <option>8</option>
                            <option>9</option>
                            <option>10</option>
                            <option>11</option>
                            <option>12</option>
                            <option>13</option>
                            <option>14</option>
                            <option>15</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="span3">
                <div class="control-group borderdices">
                    <div class="borderdices totalcenteralign text-center">
                    <label class="control-label" for="inputEmail">Modifier:</label>    
                    </div>
                    <div class="controls text-center controlsmargin">
                        <select class="input-mini" ng-model="diceMod">
                            <option>0</option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option><option>6</option><option>7</option><option>8</option><option>9</option><option>10</option><option>11</option><option>12</option><option>13</option><option>14</option><option>15</option><option>16</option><option>17</option><option>18</option><option>19</option><option>20</option><option>21</option><option>22</option><option>23</option><option>24</option><option>25</option><option>26</option><option>27</option><option>28</option><option>29</option>
                        </select>
                    </div>
                </div> 
            </div>
            <div class="span6">
                <div ng-click="roll(2)" class="stat-number dice"><p>d2</p></div>
                <div ng-click="roll(3)" class="stat-number dice"><p>d3</p></div>
                <div ng-click="roll(4)" class="stat-number dice"><p>d4</p></div>
                <div ng-click="roll(6)" class="stat-number dice"><p>d6</p></div>
                <div ng-click="roll(8)" class="stat-number dice"><p>d8</p></div>
                <div ng-click="roll(10)" class="stat-number dice"><p>d10</p></div>
                <div ng-click="roll(12)" class="stat-number dice"><p>d12</p></div>
                <div ng-click="roll(20)" class="stat-number dice"><p>d20</p></div>
                <div ng-click="roll(100)" class="stat-number dice"><p>d100</p></div>
            </div>
        </div>
    </div>
    <div class="menu-group">
        <label>Turn/Round Manager</label>
        <div class="input-prepend input-append">
            <button title="Previous" class="btn btn-inverse" ng-click="previous_turn()"><i class="icon-arrow-left icon-white"></i></button>
            <span class="input-small uneditable-input turn">{{characterList[campaign.turn].name}}</span>
            <button title="Next" class="btn btn-inverse" ng-click="next_turn()"><i class="icon-arrow-right icon-white"></i></button>
            <button title="Reorder" class="btn btn-inverse" ng-click="reorder()"><i class="icon-list icon-white"></i></button>
        </div>
        <div class="input-append">
            <button title="Previous" class="btn btn-inverse" ng-click="previous_round()"><i class="icon-arrow-left icon-white"></i></button>
            <span class="input-small uneditable-input turn">Round: {{campaign.round}}</span>
            <button title="Next" class="btn btn-inverse" ng-click="next_round()"><i class="icon-arrow-right icon-white"></i></button>
            <button title="Reset" class="btn btn-inverse" ng-click="set_round(0)"><i class="icon-ban-circle icon-white"></i></button>
        </div>
    </div>
    <div class="menu-group">
        <label>Enemy</label>
        <div class="input-prepend input-append">
            <div class="btn btn-inverse" ng-click="clear_enemies()"><i class="icon-minus icon-white"></i>&nbsp;Enemy</div>
            <div class="btn btn-inverse" ng-click="add_enemy()"><i class="icon-plus icon-white"></i>&nbsp;Enemy</div>
        </div>
    </div>
    <div class="menu-group">
        <div class="row-fluid">
            <div class="span7">
                <label>Rest</label>
                <div class="input-prepend input-append">
                    <div class="btn btn-inverse" ng-click="mass_short_rest()"><i class="icon-road icon-white"></i>&nbsp;Short</div>
                    <div class="btn btn-inverse" ng-click="mass_extended_rest()"><i class="icon-home icon-white"></i>&nbsp;Extended</div>
                </div>
            </div>
        </div>
        <div class="row-fluid">
            <div class="span7">
                <label>End Combat</label>
                <div class="input-prepend input-append">
                    <div class="btn btn-inverse" ng-click="mass_clear_conditions()"><i class="icon-trash icon-white"></i>&nbsp;Conditions</div>
                    <div class="btn btn-inverse" ng-click="mass_milestone()"><i class="icon-flag icon-white"></i>&nbsp;Milestone</div>
                </div>
            </div>
        </div>
        <div class="row-fluid">
            <div class="span7">
                <label>Mass XP</label>
                <div class="input-prepend input-append">
                    <div class="btn btn-inverse" ng-click="mass_give_xp()"><i class="icon-trash icon-white"></i>&nbsp;Give XP</div>
                    <div class="btn btn-inverse" ng-click="split_xp()"><i class="icon-flag icon-white"></i>&nbsp;Split XP</div>
                </div>
            </div>
        </div>
    </div>
    <div class="menu-group" id="console">
        <div ng-repeat="line in log">{{line}}</div>
    </div>
</div>
<div class="row content">
    <div class="span7">
        <div ng-controller="CharacterController" ng-repeat="(chi, ch) in characterList" class="row-fluid character-block {{ch.type}} {{has_turn()}}">
            <div class="span11">
                <div class="row-fluid">
                    <div class="span3">
                        <div class="dropdown">
                            <a class="dropdown-toggle">
                                <div class="name-container">
                                    {{ch.name}}
                                </div>
                            </a>
                            <ul class="dropdown-menu">
                                <li ng-show="ch.type == 'Player'">
                                  <a ng-click="short_rest(ch)">Short Rest</a>
                                </li>
                                <li ng-show="ch.type == 'Player'">
                                  <a ng-click="extended_rest(ch)">Extended Rest</a>
                                </li>
                                <li ng-show="ch.type == 'Player'">
                                  <a ng-click="milestone(ch)">Milestone</a>
                                </li>
                                <li ng-show="ch.type == 'Enemy'">
                                  <a ng-click="delete_character(chi, ch)">Remove</a>
                                </li>
                                <li>
                                  <a ng-click="clear_conditions(ch)">Clear Conditions</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div class="span6">
                        <div ng-click="hp_dialog()" class="stat-number hp {{ch.type}}">
                            <i ng-show="!Och.bloodied(ch)" class="icon-heart icon-white"></i>
                            <i ng-show="Och.bloodied(ch)" class="icon-tint icon-white"></i>
                            <p ng-show="ch.type != 'Enemy'">{{ch|total_hp}}</p>
                            <p ng-show="ch.type == 'Enemy' && !Och.incapacitated(ch)">{{ch.used_hit_points}}</p>
                            <p ng-show="ch.type == 'Enemy' && Och.incapacitated(ch)">XX</p>
                            
                        </div>
                        <div ng-click="spend_hs(ch)" ng-show="ch.type == 'Player'" class="stat-number hs">
                            <i class="icon-plus-sign icon-white"></i><p>{{ch|total_hs}}</p>
                        </div>
                        <div ng-click="spend_ap(ch)" class="stat-number ap">
                            <i class="icon-star icon-white"></i><p>{{ch|total_ap}}</p>
                        </div>
                        <div ng-click="change_xp(ch)" class="stat-number xp">
                            <i class="icon-user icon-white"></i><p>{{ch.experience_points}}</p>
                        </div>
                    </div>
                    <div class="span3">
                        <div class="row-fluid has-conditions-box" btf-dragon="(hci, hco) in ch._2m.has_conditions()" btf-dragon-drop-function="drop_condition">
                            <div class="condition-box" ng-click="remove_condition(hci)" tooltip-popup-delay='400' tooltip="{{hco._2o.condition().name}} I:{{hco.started_init}} R:{{hco.started_round}} ">
                                <i class="{{hco._2o.condition()|condition_icon}} icon-white"></i>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="power-container">
                    <div ng-controller="HasPowerController" ng-repeat="hasPower in ch._2m.has_powers()" ng-click="use_power()" class="power-use-button {{hasPower._2o.power()|power_type}} {{hasPower|power_style}}" tooltip-popup-delay='400' tooltip="{{hasPower._2o.power().name}} - {{hasPower._2o.power().action}}">
                        {{hasPower._2o.power().level}}
                    </div>
                </div>
            </div>
            <div class="span1">
                <div ng-click="init_dialog()" class="stat-number init">
                    <i class="icon-play"></i><p>{{ch.init}}</p>
                </div>
                <div ng-click="increase_sub_init(ch)" class="stat-number sub-init">
                    <i class="icon-play icon-white"></i><p>{{ch.sub_init}}</p>
                </div>
            </div>
        </div>
    </div>

</div>